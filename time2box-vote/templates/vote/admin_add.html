<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="description" content="">
<meta name="author" content="">
<title>Time&sup2;box - Contact</title>

<!-- Bootstrap Core CSS -->
<link rel="stylesheet"
	href="//cdn.bootcss.com/bootstrap/3.3.5/css/bootstrap.min.css">

<!-- Custom CSS -->
<link href="{{static_url("css/clean-blog.min.css")}}" rel="stylesheet">

<!-- Custom Fonts -->
<link
	href="http://maxcdn.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css"
	rel="stylesheet" type="text/css">
<link
	href='http://fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic'
	rel='stylesheet' type='text/css'>
<link
	href='http://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800'
	rel='stylesheet' type='text/css'>

<!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
<!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
<!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->
<!-- CSS -->
<style type="text/css">
.form-signin {
	max-width: 600px;
	padding: 19px 0px 19px;
	margin: 0 auto 20px;
}
</style>
</head>

<body>

	<!-- Navigation -->
	<nav class="navbar navbar-default navbar-custom navbar-fixed-top">
		<div class="container-fluid">
			<!-- Brand and toggle get grouped for better mobile display -->
			<div class="navbar-header page-scroll">
				<button type="button" class="navbar-toggle" data-toggle="collapse"
					data-target="#bs-example-navbar-collapse-1">
					<span class="sr-only">Toggle navigation</span> <span
						class="icon-bar"></span> <span class="icon-bar"></span> <span
						class="icon-bar"></span>
				</button>
				<a class="navbar-brand" href="/">Time&sup2;box</a>
			</div>

			<!-- Collect the nav links, forms, and other content for toggling -->
			<div class="collapse navbar-collapse"
				id="bs-example-navbar-collapse-1">
				<ul class="nav navbar-nav navbar-right">
					<li><a href="/">Home</a></li>
					<li><a href="/about">About</a></li>
					<li><a href="/admin/my-articles">My Articles</a></li>
					<li><a href="#">Contact</a></li>
					<li><a href="/account/logout">{{_("Logout")}}</a></li>
				</ul>
			</div>
			<!-- /.navbar-collapse -->
		</div>
		<!-- /.container -->
	</nav>

	<!-- Page Header -->
	<!-- Set your background image for this header on the line below. -->
	<header class="intro-header"
		style="background-image: url('{{static_url("img/contact-bg.jpg")}}')">
		<div class="container">
			<div class="row">
				<div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
					<div class="page-heading">
						<h1>Contact Me</h1>
						<hr class="small">
						<span class="subheading">Have questions? I have answers
							(maybe).</span>
					</div>
				</div>
			</div>
		</div>
	</header>

	<!-- Main Content -->
	<div class="container">
		<div class="row">
			<div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
				<p>Want to get in touch with me? Fill out the form below to send
					me a message and I will try to get back to you within 24 hours!</p>
				<!-- Contact Form - Enter your email address on line 19 of the mail/contact_me.php file to make this form work. -->
				<!-- WARNING: Some web hosts do not allow emails to be sent through forms to common mail hosts like Gmail or Yahoo. It's recommended that you use a private domain email address! -->
				<!-- NOTE: To use the contact form, your site must be on a live web host with PHP! The form will not work locally! -->
				<form name="sentMessage" id="contactForm" novalidate>
					<div class="row control-group">
						<div
							class="form-group col-xs-12 floating-label-form-group controls">
							<label>Title</label> <input type="text" class="form-control"
								placeholder="Title" id="name" required
								data-validation-required-message="Please enter title.">
							<p class="help-block text-danger"></p>
						</div>
					</div>
					<div class="row control-group">
						<div
							class="form-group col-xs-12 floating-label-form-group controls">
							<label>Message</label>
							<textarea rows="5" class="form-control" placeholder="Sub Title"
								id="message" required
								data-validation-required-message="Please enter sub title."></textarea>
							<p class="help-block text-danger"></p>
						</div>
					</div>
					<div class="row control-group">
						<div class="form-group required">
							<label for="file" class="sr-only">{{_("Please choose file...")}}</label>
							<input id="file" type="file" class="file" data-preview-file-type="any">
							<input id="imgUrl" name="imgUrl" type="hidden" />
						</div>
					</div>
					<div id="radioGroup">
					<div id="radio1" class="row control-group">
						<div
							class="form-group col-xs-12 floating-label-form-group controls">
							<label>Title</label> <input type="text" class="form-control"
								placeholder="Radio" id="name" required
								data-validation-required-message="Please enter radio.">
							<p class="help-block text-danger"></p>
							<button onclick="DeleteRadioButton(this);" type="button" class="btn btn-default">Delete Radio</button>
						</div>
					</div>
					</div>
					<div id="success"></div>
					<div class="row">
						<div class="form-group col-xs-12">
							<button id="submit" type="submit" class="btn btn-default">Submit</button>
							<button id="AddRadioButton" type="button" class="btn btn-default">Add Radio</button>
						</div>
					</div>
				</form>
			</div>
		</div>
	</div>

	<hr>

	<!-- Footer -->
	<footer>
		<div class="container">
			<div class="row">
				<div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
					<ul class="list-inline text-center">
						<li><a href="mailto:thomas@time2box.com"> 
							<span class="fa-stack fa-lg"> 
								<i class="fa fa-circle fa-stack-2x"></i> 
								<i class="fa fa-envelope fa-stack-1x fa-inverse"></i>
							</span>
						</a></li>
						<li><a href="http://weibo.com/sedums"> 
							<span class="fa-stack fa-lg"> 
								<i class="fa fa-circle fa-stack-2x"></i> 
								<i class="fa fa-weibo fa-stack-1x fa-inverse"></i>
							</span>
						</a></li>
						<li><a href="https://www.linkedin.com/in/璟天-张-33a65a102"> 
							<span class="fa-stack fa-lg"> 
								<i class="fa fa-circle fa-stack-2x"></i> 
								<i class="fa fa-linkedin fa-stack-1x fa-inverse"></i>
							</span>
						</a></li>
						<li><a href="https://github.com/ThomasZh"> 
							<span class="fa-stack fa-lg"> 
								<i class="fa fa-circle fa-stack-2x"></i> 
								<i class="fa fa-github fa-stack-1x fa-inverse"></i>
							</span>
						</a></li>
					</ul>
					<p class="copyright text-muted">Copyright &copy; time2box.com 2016</p>
				</div>
			</div>
		</div>
	</footer>

	<!-- jQuery -->
	<script src="//cdn.bootcss.com/jquery/1.11.3/jquery.min.js"></script>

	<!-- Bootstrap Core JavaScript -->
	<script src="//cdn.bootcss.com/bootstrap/3.3.5/js/bootstrap.min.js"></script>

	<script src="{{ static_url("js/fileinput.min.js")}}"></script>
	<script src="{{ static_url("js/fileinput_locale_zh.js")}}"></script>
	<script src="{{ static_url("js/spark-md5.min.js")}}"></script>
	<script src="{{ static_url("js/async.js")}}"></script>
	<script src="{{ static_url("js/upyun-mu.js")}}"></script>

	<!-- Custom Theme JavaScript -->
	<script src="{{static_url("js/clean-blog.min.js")}}"></script>

	<script type="text/javascript">
		// with plugin options
		$("#file").fileinput({
			'showCaption': false, 
			'showUpload': false,
		});
		radioNum = 1;
		
		$("#AddRadioButton").click(function(){ // This event fires when a button is clicked
			radioNum++;
			$('#radioGroup').append('<div id="radio'+radioNum+'" class="row control-group">'+
					'<div class="form-group col-xs-12 floating-label-form-group controls">'+
					'<label>Title</label> <input type="text" class="form-control"'+
					'placeholder="Radio" id="name" required'+
					'data-validation-required-message="Please enter radio.">'+
					'<p class="help-block text-danger"></p>'+
					'<button onclick="DeleteRadioButton(this);" type="button" class="btn btn-default">Delete Radio</button>'+
					'</div>');
		});
		
		function DeleteRadioButton(element) {
			var parentElement = element.parentNode;
			if (parentElement) {
				var superElement = parentElement.parentNode;
				if (superElement) {
					var groupElement = superElement.parentNode;
					if (groupElement) {
						groupElement.removeChild(superElement);
						radioNum--;
					}
				}
         	}
		}
		
		function uuid() {
			var s = [];
			var hexDigits = "0123456789abcdef";
			for (var i = 0; i < 36; i++) {
				s[i] = hexDigits.substr(Math.floor(Math.random() * 0x10), 1);
			}
			s[14] = "4"; // bits 12-15 of the time_hi_and_version field to 0010
			s[19] = hexDigits.substr((s[19] & 0x3) | 0x8, 1); // bits 6-7 of the clock_seq_hi_and_reserved to 01
			s[8] = s[13] = s[18] = s[23] = "-";

			var uuid = s.join("");
			return uuid;
		}
		
		function uploadUpyun(file) {
			var ext = '.' + file.name.split('.').pop();
			
			var config = {
				// 空间名称
				bucket : 'bighorn',
				// 上传请求过期时间
				expiration : parseInt((new Date().getTime() + 3600000) / 1000),
				// 尽量不要使用直接传表单 API 的方式，以防泄露造成安全隐患
				form_api_secret : 'minNcL/cabhEznMeFpYhEQFsH+k='
			};

			var instance = new Sand(config);
			var options = {
				'notify_url' : 'http://upyun.com'
			};
			instance.setOptions(options);

			var d = new Date();
			var month = d.getMonth() + 1;
			var filename = '/image/test/' + d.getFullYear() + '/' + month + '/' + d.getDate() + '/' + uuid() + ext;
			instance.upload(filename);
			
			return 'http://bighorn.b0.upaiyun.com' + filename;
		}
		
		document.getElementById('submit').onclick = function() {
			var ext = '.' + document.getElementById('file').files[0].name.split('.').pop();
			var imgUrl = uploadUpyun(file);
			document.getElementById("imgUrl").value = imgUrl;
		};

		document.addEventListener('uploaded',function(e) {
			var block = document.getElementById('success-block');

			var elem = document.createElement("ul");
			elem.innerHTML += '<div class="alert alert-success" role="alert">Well done! You successfully upload this file.</div>';
			block.appendChild(elem);

			setTimeout(function() {
				elem.remove();
			}, 5000);

			document.getElementById("form1").submit();
		});
	</script>
</body>

</html>
